## Redis 定义与主要数据类型
redis是非关系型内存键值数据库，可以储存键与五种不同类型的值 之间的映射，键的类型只有字符串，值的类型（String，LIST,SET,HASH,ZSET）

String：字符串

LIST:列表

set：无序集合

hash：包含键值对的无序散列表

zset：有序集合
## redis重要数据结构
1.字典：通过链地址法解决哈希冲突

2.跳表：跳表是基于多指针有序链表实现的，可以看成多个有序链表。

查找时：从上层指针开始查找，找到区间后进入下一层查找

相对于红黑树平衡树的优点：1.插入快速，没有旋转这些操作 2.实现简单 3.支持无锁
## redis数据储存在哪？
redis将数据储存在内存，但是也会定期将数据写入硬盘中
## redis写数据的两种模式
1.**快照模式**

a>定时快照：按一定时间将数据写入磁盘

b>定量快照：数据变化超过一定次数后写入磁盘

2.**写模式**
在这种模式，redis会把所有修改数据的命令写在一个只能追加的ASAP文件中，当redis重启时，会将文件中的所有命令执行一遍

## 缓存穿透
缓存与数据库中都没有数据被频繁请求，当这个请求量太多，用户太多时，会导致DB崩溃

解决方法：1.对id进行基础校验

2.从缓存取不到的数据，在数据库中也没有取到，这时也可以将key-value对写为key-null，缓存有效时间可以设置短点，如30秒（设置太长会导致正常情况也没法使用）。这样可以防止攻击用户反复用同一个id暴力攻击

## 缓存击穿
缓存中没有，但是数据库中有的数据被大量访问，引起数据库压力瞬间增大，造成过大压力。（一般是并发查同一条数据）

解决方法：1.加互斥锁
2.设置热点数据不过期

## 缓存雪崩
缓存中的数据大批量过期，而查询数据量巨大，引起数据库压力过大甚至down机。

雪崩与击穿的差别：击穿一般是并发查同一条数据，雪崩是很多数据过期在缓存中查不到就都到数据库中查询

解决方法：1.设置热点数据不过期
2.将缓存数据的过期时间设置为随机
